# Лабораторная работа №4: Кручение — единая документация

**Авторы:** Коваленко Кирилл, Иокерс Артем (ИН-31)  
**Дата:** 18 декабря 2025  
**Цель:** Экспериментальное определение модуля сдвига G и механических характеристик при кручении стали, чугуна и дерева с использованием десктоп и веб-приложений.

---

## 1. Быстрый запуск

- Установить зависимости: `pip install -r requirements.txt`
- Рекомендовано: `python launcher.py` (кнопки: Десктоп, Веб, Документация)
- Десктоп напрямую: `python main.py`
- Веб напрямую: `python web_app.py` → http://localhost:5000
- Генерация отчёта .docx: `python generate_final_report.py`
- Сборка exe (PyInstaller): `build_exe.bat` (Windows) или `./build_exe.sh` (macOS/Linux)

---

## 2. Структура проекта

```
torsion/
├── main.py / web_app.py / launcher.py
├── build_exe.bat / build_exe.sh
├── core/ (calculator, database, animator, report_generator)
├── ui/ (main_window, diagrams, premium_styles)
├── templates/index.html, static/style.css
├── torsion_lab.db, torsion_animation.gif
├── requirements.txt
└── README.md (этот файл)
```

---

## 3. Теория (опорные формулы)

- Полярный момент инерции: `Jp = π·D⁴ / 32`
- Полярный момент сопротивления: `Wp = π·D³ / 16`
- Закон Гука при кручении: `φ = T·ℓ / (G·Jp)`
- Модуль сдвига: `G = T·ℓ / (φ·Jp)`
- Максимальное касательное напряжение: `τmax = T / Wp`
- Распределение напряжений: `τ(ρ) = T·ρ / Jp`
- Относительный сдвиг: `γ = (φ·D) / (2ℓ)`
- Эталонные значения: Сталь 8.1·10⁴ МПа, Чугун 4.0·10⁴ МПа, Дерево 0.5·10³ МПа  
  Методичка: E=2.01·10⁵ МПа, μ=0.26 → G≈7.98·10⁴ МПа

---

## 4. Функции приложения

- Расчёт: генерация T–φ, МНК на линейном участке, погрешность к эталону, τmax, γmax, характер разрушения.
- Визуализация: диаграмма T–φ (с упругой областью и теоретической линией), τ(ρ), сравнение G, предпросмотр GIF.
- Анимация: GIF 8 c, 20 fps, визуализация закручивания и напряжений.
- База данных (SQLite + SQLAlchemy): эксперименты, пользователи, результаты тестов.
- Отчёт: .docx с титулом, таблицами, графиками и выводами.
- Тест: 8 вопросов по кручению.
- REST API (Flask):
  - `POST /api/calculate` — расчёт
  - `POST /api/plot/torsion` — диаграмма T–φ (base64)
  - `POST /api/plot/stress` — τ(ρ) (base64)
  - `GET/POST /api/experiments` — работа с БД
  - `POST /api/test` — проверка теста

---

## 5. Интерфейс

- Десктоп (PyQt5): вкладки Эксперимент, Результаты и графики, База данных, Контрольный тест; предпросмотр анимации; сохранение графиков/отчётов.
- Веб (Flask): те же разделы; карточка с GIF-примером; панель метрик (Gэксп, Gэталон, δ, T_max, τ_max).
- Лаунчер: выбор десктоп/веб/документации, плавные анимации.

---

## 6. Проверки и типовые значения

- G в пределах типичных диапазонов: Сталь 75–85 ГПа, Чугун 30–50 ГПа, Дерево 0.5–2 ГПа.
- Диаметр критичен (влияет как D⁴); корректность единиц: ввод D,L в мм, расчёты в метрах.
- Погрешность выводится в %, упругая область подсвечена на графике.

---

## 7. Примеры использования (Python)

```python
from core.calculator import TorsionCalculator
calc = TorsionCalculator(0.010, 0.200, 'Сталь')
data = calc.generate_diagram_data(T_max=100.0, num_points=50)
results = calc.process_experiment_data(data['T'], data['phi'])
print(results['G_experimental'], results['relative_error'])
```

---

## 8. Требования

- Python 3.8+; ОС: Windows/macOS/Linux; RAM: 512 МБ; Диск: 100 МБ.
- Браузер для веб-версии: Chrome/Firefox/Safari/Edge.

---

## 9. Сборка exe (PyInstaller)

- Windows: `build_exe.bat`
- macOS/Linux: `./build_exe.sh`
  Артефакты: `dist/torsion_lab_launcher[.exe]`

---

## 10. Авторы и права

Проект учебный, для дисциплины «Сопротивление материалов».  
© 2025 Коваленко К., Иокерс А., РУДН. Все права защищены.
